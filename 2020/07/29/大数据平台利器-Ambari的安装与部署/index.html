

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Jude Zeng">
  <meta name="keywords" content="">
  
  <title>大数据平台利器-Ambari的安装与部署 - 曾俊峰的技术博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/rainbow.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"github.com","root":"/","version":"1.8.10","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":"ef66d4af7f19e187be25c51e68a54b04","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Jude'blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://i.loli.net/2020/05/16/pPq2N5KTLjRBiDu.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="大数据平台利器-Ambari的安装与部署">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-07-29 15:24" pubdate>
        2020年7月29日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      56
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">大数据平台利器-Ambari的安装与部署</h1>
            
            <div class="markdown-body">
              <h1 id="Ambari是什么"><a href="#Ambari是什么" class="headerlink" title="Ambari是什么"></a>Ambari是什么</h1><blockquote>
<p><code>Ambari</code> 自身也是一个分布式架构的软件，主要由两部分组成：<code>Ambari Server</code> 和 <code>Ambari Agent</code>。简单来说，用户通过 <code>Ambari Server</code> 通知 <code>Ambari Agent</code> 安装对应的软件；<code>Agent</code>会定时地发送各个机器每个软件模块的状态给 <code>Ambari Server</code>，最终这些状态信息会呈现在<code>Ambari</code>的<code>GUI</code>，方便用户了解到集群的各种状态，并进行相应的维护。</p>
</blockquote>
<h1 id="Ambari-安装部署"><a href="#Ambari-安装部署" class="headerlink" title="Ambari 安装部署"></a>Ambari 安装部署</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><blockquote>
<p>版本选择<code>ambari-2.7.3</code>、<code>HDP-3.1.0.0</code></p>
</blockquote>
<h3 id="1、安装包下载-主节点"><a href="#1、安装包下载-主节点" class="headerlink" title="1、安装包下载(主节点)"></a>1、安装包下载(主节点)</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">wget http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0/ambari-2.7.3.0-centos7.tar.gz<br>wget http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/HDP-3.1.0.0-centos7-rpm.tar.gz<br>wget http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7/HDP-UTILS-1.1.0.22-centos7.tar.gz<br>wget http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0/HDP-GPL-3.1.0.0-centos7-gpl.tar.gz<br></code></pre></div></td></tr></table></figure>

<h3 id="2、配置Java环境-所有节点"><a href="#2、配置Java环境-所有节点" class="headerlink" title="2、配置Java环境(所有节点)"></a>2、配置Java环境(所有节点)</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> jdk自行下载</span><br>tar -zxvf jdk-8u181-linux-x64.tar.gz -C /usr/lib/jvm/<br><span class="hljs-meta">#</span><span class="bash">设置环境变量</span><br>export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_181<br>export JRE_HOME=$&#123;JAVA_HOME&#125;/jre<br>export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib<br>export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH<br><span class="hljs-meta">#</span><span class="bash">环境变量生效</span><br>source /etc/profile<br><span class="hljs-meta">#</span><span class="bash">查看Java版本</span><br>java -version<br></code></pre></div></td></tr></table></figure>

<h3 id="3、设置hostname、hosts-所有节点"><a href="#3、设置hostname、hosts-所有节点" class="headerlink" title="3、设置hostname、hosts (所有节点)"></a>3、设置hostname、hosts (所有节点)</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 设置hostname</span><br>hostnamectl set-hostname hadoop17<br><br>设置hosts<br>vim /etc/hosts(注释掉其他ip)<br>172.16.100.15  hadoop15<br>172.16.100.16  hadoop16<br>172.16.100.17  hadoop17<br>172.16.100.1x  hadoop1x<br>...<br><br><span class="hljs-meta">#</span><span class="bash"> 设置 vim /etc/sysconfig/network</span><br>NETWORKING=yes<br>HOSTNAME=hadoop15<br></code></pre></div></td></tr></table></figure>

<h3 id="4、时钟同步-所有节点"><a href="#4、时钟同步-所有节点" class="headerlink" title="4、时钟同步(所有节点)"></a>4、时钟同步(所有节点)</h3><blockquote>
<p>每台机器都要时钟同步</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 安装ntpdate</span><br>yum -y install ntp<br><br><span class="hljs-meta">#</span><span class="bash"> 单台机器时钟同步、且机器要与外网ping通</span><br>ntpdate 10.211.0.101<br><br><span class="hljs-meta">#</span><span class="bash"> 时钟同步脚本</span><br>crontab -e<br>*/15 * * * * ntpdate 10.211.0.101<br></code></pre></div></td></tr></table></figure>

<h3 id="5、修改文件打开限制-所有节点"><a href="#5、修改文件打开限制-所有节点" class="headerlink" title="5、修改文件打开限制(所有节点)"></a>5、修改文件打开限制(所有节点)</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">vim /etc/security/limits.conf<br>* soft nofile 65536<br>* hard nofile 65536<br>* soft nproc 131072<br>* hard nproc 131072<br></code></pre></div></td></tr></table></figure>

<h3 id="6、关闭防火墙-所有节点"><a href="#6、关闭防火墙-所有节点" class="headerlink" title="6、关闭防火墙(所有节点)"></a>6、关闭防火墙(所有节点)</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">systemctl stop firewalld.service<br>systemctl disable firewalld.service<br><span class="hljs-meta">#</span><span class="bash"> 修改配置文件</span><br>vim /etc/selinux/config<br>SELINUX=disabled<br></code></pre></div></td></tr></table></figure>

<h3 id="7、SSH无密码登陆（主节点）"><a href="#7、SSH无密码登陆（主节点）" class="headerlink" title="7、SSH无密码登陆（主节点）"></a>7、SSH无密码登陆（主节点）</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 配置hadoop15节点无密码登录到其他节点，在hadoop15节点上操作</span><br>ssh-keygen -t rsa<br>ssh-copy-id hadoop16 (其他11台机器)<br><br><span class="hljs-meta">#</span><span class="bash"> 验证ssh免密是否生效</span><br>ssh hadoop15 hostname;ssh hadoop16 hostname;ssh hadoop17 hostname  ....<br><span class="hljs-meta">#</span><span class="bash"> 拷贝密钥(后续需要使用)</span><br>cp ~/.ssh/id_rsa /data/soft<br><br><span class="hljs-meta">#</span><span class="bash"> 设置<span class="hljs-built_in">umask</span></span><br>sh -c "echo umask 0022 &gt;&gt; /etc/profile"<br><span class="hljs-meta">#</span><span class="bash"> 解释：022表示默认创建新文件权限为755 也就是 rxwr-xr-x(所有者全部权限，属组读写，其它人读写) </span><br><span class="hljs-meta">#</span><span class="bash"> 详细文档：https://www.cnblogs.com/walblog/articles/7903319.html</span><br></code></pre></div></td></tr></table></figure>

<h3 id="8、-安装mysql"><a href="#8、-安装mysql" class="headerlink" title="8、 安装mysql"></a>8、 安装mysql</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 安装mysql源,centos7默认不带mysql安装源</span><br>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm<br>yum install mysql-server -y<br><span class="hljs-meta">#</span><span class="bash"> 启动mysql</span><br>service mysqld start<br>service mysqld status<br><span class="hljs-meta">#</span><span class="bash"> 创建root管理员</span><br>mysqladmin -uroot password root<br><span class="hljs-meta">#</span><span class="bash"> 登录</span><br>mysql -uroot -proot<br><span class="hljs-meta">#</span><span class="bash"> 设置远程访问</span><br>use mysql<br>执行update user set host = '%' where user = 'root';这一句执行完可能会报错，不用管它。<br><br><span class="hljs-meta">#</span><span class="bash">（注意：设置这个之后，在本地直接访问时，老是登录不上，但是使用远程就可以登录上，原因：mysql中一个用户名为空的访问本地权限的字段，所有登陆时优先匹配了这一条，就无法登陆了。</span><br>select user,host from mysql.user;<br><span class="hljs-meta">#</span><span class="bash">删除用户即可</span><br>drop user ''@localhost;<br>flush privileges;<br></code></pre></div></td></tr></table></figure>

<h2 id="修改yum源，实现离线安装"><a href="#修改yum源，实现离线安装" class="headerlink" title="修改yum源，实现离线安装"></a>修改yum源，实现离线安装</h2><h3 id="1、安装httpd服务（主服务器）"><a href="#1、安装httpd服务（主服务器）" class="headerlink" title="1、安装httpd服务（主服务器）"></a>1、安装httpd服务（主服务器）</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">yum -y install httpd<br>service httpd restart<br>chkconfig httpd on<br></code></pre></div></td></tr></table></figure>

<h3 id="2、将上面下载的包放到-var-www-html目录下（主服务器）"><a href="#2、将上面下载的包放到-var-www-html目录下（主服务器）" class="headerlink" title="2、将上面下载的包放到/var/www/html目录下（主服务器）"></a>2、将上面下载的包放到/var/www/html目录下（主服务器）</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">root@hadoop15 ~]$ mkdir /var/www/html/hdp  在http服务默认目录下添加目录<br>[root@hadoop15 ~]$ cd /var/www/html/hdp    进入添加的目录<br>[hdfs@hadoop15 hdp]$ ll<br>总用量 20<br>drwxr-xr-x 3 root   root  4096 7月  28 12:20 ambari<br>drwxr-xr-x 3 ambari users 4096 12月 11 2018 HDP<br>drwxr-xr-x 3 root   root  4096 7月  28 19:54 HDP-GPL<br>drwxr-xr-x 3 root   root  4096 7月  28 12:16 HDP-UTILS-1.1.0.22<br>drwxr-xr-x 2 root   root  4096 7月  28 12:27 repodata<br><span class="hljs-meta">#</span><span class="bash"> 上传之前下载包</span><br>[root@hadoop15 hdp]$ tar -zxvf ambari-2.7.3.0-centos7.tar.gz    <br>[root@hadoop15 hdp]$ tar -zxvf HDP-3.1.0.0-centos7-rpm.tar.gz  <br>[root@hadoop15 hdp]$ tar -zxvf HDP-UTILS-1.1.0.22-centos7.tar.gz <br>[root@hadoop15 hdp]$ tar -zxvf HDP-GPL-3.1.0.0-centos7-gpl.tar.g<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p><strong>遇到系统盘空间比较小的，可以修改/val/www/html所在的路径</strong></p>
<figure class="highlight gradle"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs gradle">执行vim <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf/</span>httpd.conf指令<br>找到 DocumentRoot <span class="hljs-string">"/var/www/html"</span> 这一段  #apache的根目录，把<span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html 这个目录改为/</span>data（自己想要设置的目录）<br></code></pre></div></td></tr></table></figure>

<p>再找到 <code>&lt;Directory &quot;/var/www/html&quot;&gt;</code> #定义<code>apache</code> /<code>var/www/html</code>这个区域，把 <code>/var/www/html</code>改成<code>/data（</code>自己想要设置的目录）</p>
<p>重启<code>httpd</code>服务</p>
</blockquote>
<h3 id="3、访问http-ip-hdp查看是否能成功访问"><a href="#3、访问http-ip-hdp查看是否能成功访问" class="headerlink" title="3、访问http://ip/hdp查看是否能成功访问"></a>3、访问<a href="http://ip/hdp查看是否能成功访问" target="_blank" rel="noopener">http://ip/hdp查看是否能成功访问</a></h3><blockquote>
<p>如果成功的话，可以看到 安装的文件</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 检查是否访问成功</span><br>http://10.34.50.142/hdp/<br></code></pre></div></td></tr></table></figure>

<h3 id="4、制作本地源"><a href="#4、制作本地源" class="headerlink" title="4、制作本地源"></a>4、制作本地源</h3><figure class="highlight autoit"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs autoit">安装本地源制作相关工具（主服务器）<br>[root<span class="hljs-symbol">@hadoop15</span> hdp]yum install yum-utils createrepo yum-plugin-priorities -y<br>[root<span class="hljs-symbol">@hadoop15</span> hdp]<span class="hljs-meta"># createrepo ./</span><br></code></pre></div></td></tr></table></figure>

<h3 id="5、修改文件里面的源地址（主服务器）"><a href="#5、修改文件里面的源地址（主服务器）" class="headerlink" title="5、修改文件里面的源地址（主服务器）"></a>5、修改文件里面的源地址（主服务器）</h3><ul>
<li><code>ambari</code> 文件的<code>repo</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">1、打开repo<br>[root@hadoop15 hdp]# vim ambari/centos7/2.7.3.0-139/ambari.repo<br>2、修改内容<br><span class="hljs-meta">#</span><span class="bash">VERSION_NUMBER=2.7.3.0-139</span><br>[ambari-2.7.3.0]<br><span class="hljs-meta">#</span><span class="bash">json.url = http://public-repo-1.hortonworks.com/HDP/hdp_urlinfo.json</span><br>name=ambari Version - ambari-2.7.3.0<br>baseurl=http://172.16.100.15/hdp/ambari/centos7/2.7.3.0-139<br>gpgcheck=1<br>gpgkey=http://172.16.100.15/hdp/ambari/centos7/2.7.3.0-139/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins<br>enabled=1<br>priority=1<br>3、移动repo<br>[root@hadoop15 hdp]# cp ambari/centos7/2.7.3.0-139/ambari.repo /etc/yum.repos.d/<br></code></pre></div></td></tr></table></figure>

<ul>
<li><code>HDP</code>文件的<code>repo</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">1、打开repo<br>[root@hadoop15 hdp]# vim HDP/centos7/3.1.0.0-78/hdp.repo<br>2、修改内容<br><span class="hljs-meta">#</span><span class="bash">VERSION_NUMBER=3.1.0.0-78</span><br>[HDP-3.1.0.0]<br>name=HDP Version - HDP-3.1.0.0<br>baseurl=http://172.16.100.15/hdp/HDP/centos7/3.1.0.0-78<br>gpgcheck=1<br>gpgkey=http://172.16.100.15/hdp/HDP/centos7/3.1.0.0-78/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins<br>enabled=1<br>priority=1<br><br><br>[HDP-UTILS-1.1.0.22]<br>name=HDP-UTILS Version - HDP-UTILS-1.1.0.22<br>baseurl=http://172.16.100.15/hdp/HDP-UTILS-1.1.0.22/HDP-UTILS/centos7/1.1.0.22/<br>gpgcheck=1<br>gpgkey=http://172.16.100.15/hdp/HDP-UTILS-1.1.0.22/HDP-UTILS/centos7/1.1.0.22/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins<br>enabled=1<br>priority=1<br>3、移动repo<br>[root@hadoop15 hdp]# cp HDP/centos7/3.1.0.0-78/hdp.repo /etc/yum.repos.d/<br></code></pre></div></td></tr></table></figure>

<ul>
<li><code>yum</code>清除缓存</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">yum clean all<br>yum makecache<br>yum repolist<br></code></pre></div></td></tr></table></figure>

<h3 id="6、脚本分发到子节点"><a href="#6、脚本分发到子节点" class="headerlink" title="6、脚本分发到子节点"></a>6、脚本分发到子节点</h3><ul>
<li>脚本xsync编写</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/bin/bash</span><br><span class="hljs-meta">#</span><span class="bash">1 获取输入参数个数，如果没有参数，直接退出</span><br>pcount=$#<br>if((pcount==0)); then<br>echo no args;<br>exit;<br>fi<br><span class="hljs-meta">#</span><span class="bash">2 获取文件名称</span><br>p1=$1<br>fname=`basename $p1`<br>echo fname=$fname<br><span class="hljs-meta">#</span><span class="bash">3 获取上级目录到绝对路径</span><br>pdir=`cd -P $(dirname $p1); pwd`<br>echo pdir=$pdir<br><span class="hljs-meta">#</span><span class="bash">4 获取当前用户名称</span><br>user=`whoami`<br><span class="hljs-meta">#</span><span class="bash">5 循环</span><br>for((host=15; host&lt;125; host++)); do<br>        echo ------------------- hadoop$host --------------<br>                rsync -rvl $pdir/$fname $user@10.0.14.$host:$pdir<br>                done<br> <br><span class="hljs-meta">#</span><span class="bash">添加权限 chmod 777 xsync</span><br></code></pre></div></td></tr></table></figure>

<ul>
<li>分发子节点</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 切记到yum.repos.d 目录下去分发repo文件</span><br>[root@hadoop15 yum.repos.d]# xsync ambari.repo<br>[root@hadoop15 yum.repos.d]# xsync hdp.repo<br></code></pre></div></td></tr></table></figure>

<h2 id="安装Ambari-server"><a href="#安装Ambari-server" class="headerlink" title="安装Ambari-server"></a>安装<code>Ambari-server</code></h2><ul>
<li><code>maste</code>r节点</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">yum -y install ambari-server<br></code></pre></div></td></tr></table></figure>

<ul>
<li>给<code>ambari、oozie、ranger、rangerkms、superse</code>配置mysql元数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment"># ambari</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> ambari; <br><span class="hljs-keyword">use</span> ambari; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'ambari'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'ambari'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'ambari'</span>@<span class="hljs-string">'%'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'ambari'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'ambari'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'ambari'</span>@<span class="hljs-string">'localhost'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'ambari'</span>@<span class="hljs-string">'hadoop15'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'ambari'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'ambari'</span>@<span class="hljs-string">'hadoop15'</span>; <br><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>; <br>source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql <br><span class="hljs-keyword">show</span> <span class="hljs-keyword">tables</span>; <br><span class="hljs-keyword">use</span> mysql; <br><span class="hljs-keyword">select</span> Host,<span class="hljs-keyword">User</span>,<span class="hljs-keyword">Password</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span>=<span class="hljs-string">'ambari'</span>; <br><br><span class="hljs-comment"># hive</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> hive; <br><span class="hljs-keyword">use</span> hive; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'hive'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'hive'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'hive'</span>@<span class="hljs-string">'%'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'hive'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'hive'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'hive'</span>@<span class="hljs-string">'localhost'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'hive'</span>@<span class="hljs-string">'hadoop15'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'hive'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'hive'</span>@<span class="hljs-string">'hadoop15'</span>; <br><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>; <br><br><span class="hljs-comment"># oozie</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> oozie; <br><span class="hljs-keyword">use</span> oozie; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'oozie'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'oozie'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'oozie'</span>@<span class="hljs-string">'%'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'oozie'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'oozie'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'oozie'</span>@<span class="hljs-string">'localhost'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'oozie'</span>@<span class="hljs-string">'hadoop15'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'oozie'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'oozie'</span>@<span class="hljs-string">'hadoop15'</span>; <br><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;<br><br><span class="hljs-comment"># ranger</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DATABASE</span> rangdb;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> rangdb; <br><span class="hljs-keyword">use</span> rangdb; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'rangdb'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'rangdb'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'rangdb'</span>@<span class="hljs-string">'%'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'rangdb'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'rangdb'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'rangdb'</span>@<span class="hljs-string">'localhost'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'rangdb'</span>@<span class="hljs-string">'hadoop15'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'rangdb'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'rangdb'</span>@<span class="hljs-string">'hadoop15'</span>; <br><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;<br><br><span class="hljs-comment"># rangerkms</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DATABASE</span> rangerkms;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> rangerkms; <br><span class="hljs-keyword">use</span> rangerkms; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'rangerkms'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'rangerkms'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'rangerkms'</span>@<span class="hljs-string">'%'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'rangerkms'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'rangerkms'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'rangerkms'</span>@<span class="hljs-string">'localhost'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'rangerkms'</span>@<span class="hljs-string">'hadoop15'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'rangerkms'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'rangerkms'</span>@<span class="hljs-string">'hadoop15'</span>; <br><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;<br><br><span class="hljs-comment">#superset</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DATABASE</span> superset;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> superset; <br><span class="hljs-keyword">use</span> superset; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'superset'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'superset'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'superset'</span>@<span class="hljs-string">'%'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'superset'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'superset'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'superset'</span>@<span class="hljs-string">'localhost'</span>; <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'superset'</span>@<span class="hljs-string">'hadoop15'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'superset'</span>; <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'superset'</span>@<span class="hljs-string">'hadoop15'</span>; <br><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;<br></code></pre></div></td></tr></table></figure>

<ul>
<li>安装<code>mysql</code>驱动、创建<code>mysql</code>与<code>ambari-server</code>的连接</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.zip<br>mkdir /usr/share/java<br>cp 解压目录/mysql-connector-java-5.1.46.jar /usr/share/java/mysql-connector-java.jar<br>cp /usr/share/java/mysql-connector-java.jar /var/lib/ambari-server/resources/mysql-jdbc-driver.jar<br><span class="hljs-meta">#</span><span class="bash"> 给ambari添加驱动路径</span><br>vi /etc/ambari-server/conf/ambari.properties<br>server.jdbc.driver.path=/usr/share/java/mysql-connector-java.jar<br></code></pre></div></td></tr></table></figure>

<h2 id="初始化设置ambari-server并启动"><a href="#初始化设置ambari-server并启动" class="headerlink" title="初始化设置ambari-server并启动"></a>初始化设置ambari-server并启动</h2><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">[root@hadoop15 ~]# ambari-server setup<br>下面是配置执行流程，按照提示操作<br>（1） 提示是否自定义设置。输入：y<br>Customize user account for ambari-server daemon [y/n] (n)? y<br>（2）ambari-server 账号。<br>Enter user account for ambari-server daemon (root):<br>如果直接回车就是默认选择root用户<br>如果输入已经创建的用户就会显示：<br>Enter user account for ambari-server daemon (root):ambari<br>Adjusting ambari-server permissions and ownership...<br>（3）检查防火墙是否关闭<br>Adjusting ambari-server permissions and ownership...<br>Checking firewall...<br>WARNING: iptables is running. Confirm the necessary Ambari ports are accessible. Refer to the Ambari documentation for more details on ports.<br>OK to continue [y/n] (y)?<br>直接回车<br>（4）设置JDK。输入：3<br>Checking JDK...<br>Do you want to change Oracle JDK [y/n] (n)? y<br>[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8<br>[2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7<br>[3] Custom JDK<br>==============================================================================<br>Enter choice (1): 3<br>如果上面选择3自定义JDK,则需要设置JAVA_HOME。输入：/usr/java/jdk1.8.0_161<br>WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.<br>WARNING: JCE Policy files are required for configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.<br>Path to JAVA_HOME: /usr/java/jdk1.8.0_131<br>Validating JDK on Ambari Server...done.<br>Completing setup...<br>（5）数据库配置。选择：y<br>Configuring database...<br>Enter advanced database configuration [y/n] (n)? y<br>（6）选择数据库类型。输入：3<br>Configuring database...<br>==============================================================================<br>Choose one of the following options:<br>[1] - PostgreSQL (Embedded)<br>[2] - Oracle<br>[3] - MySQL<br>[4] - PostgreSQL<br>[5] - Microsoft SQL Server (Tech Preview)<br>[6] - SQL Anywhere<br>==============================================================================<br>Enter choice (3): 3<br>（7）设置数据库的具体配置信息，根据实际情况输入，如果和括号内相同，则可以直接回车。如果想重命名，就输入。<br>Hostname (localhost):<br>Port (3306):<br>Database name (ambari):<br>Username (ambari):<br>Enter Database Password (bigdata):ambarizk123<br>Re-Enter password: ambarizk123<br>（8）将Ambari数据库脚本导入到数据库<br>WARNING: Before starting Ambari Server, you must run the following DDL against the database to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql<br>Proceed with configuring remote database connection properties [y/n] (y)? <br>[root@hadoop15 ~]# ambari-server start<br></code></pre></div></td></tr></table></figure>

<h2 id="安装ambari-agent"><a href="#安装ambari-agent" class="headerlink" title="安装ambari agent"></a>安装ambari agent</h2><ul>
<li>全部节点安装</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">yum install ambari-agent -y<br></code></pre></div></td></tr></table></figure>

<ul>
<li>修改配置文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta"> #</span><span class="bash"> 打开</span><br> vi/etc/ambari-agent/conf/ambari-agent.ini<br><span class="hljs-meta"> #</span><span class="bash"> 改为控制节点的机器名（IP也可）所以机器的hostname都要配置为master节点的、</span><br>[server]<br>hostname=hadoop15 # 修改此地址即可<br>url_port=8440<br>secured_url_port=8441<br>connect_retry_delay=10<br>max_reconnect_retry_delay=30<br>...<br></code></pre></div></td></tr></table></figure>

<h2 id="访问ambari-server-web页面"><a href="#访问ambari-server-web页面" class="headerlink" title="访问ambari-server web页面"></a>访问<code>ambari-server web</code>页面</h2><blockquote>
<p>默认端口8080，Username：admin；Password：admin；<a href="http://ip:8080" target="_blank" rel="noopener">http://ip:8080</a></p>
<p>注意：ip为主节点master的ip</p>
</blockquote>
<h3 id="安装hive组件必须执行如下"><a href="#安装hive组件必须执行如下" class="headerlink" title="安装hive组件必须执行如下:"></a>安装hive组件必须执行如下:</h3><figure class="highlight plain"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs she">ambari-server setup --jdbc-db&#x3D;mysql --jdbc-driver&#x3D;&#x2F;usr&#x2F;share&#x2F;java&#x2F;mysql-connector-java.jar<br></code></pre></div></td></tr></table></figure>

<h1 id="安装配置部署HDP集群"><a href="#安装配置部署HDP集群" class="headerlink" title="安装配置部署HDP集群"></a>安装配置部署HDP集群</h1><blockquote>
<ul>
<li><p>登录<code>webui</code></p>
</li>
<li><p>本地源配置,选择对应的os,其它的删掉</p>
</li>
<li><p>集群节点和ssh密钥配置</p>
</li>
<li><p>选装对应的组件</p>
</li>
<li><p>配置组件的账号密码，与<code>mysql</code>一致</p>
</li>
<li><p><code>hive、oozie、ranger 、rangerkms、superset</code>中数据库<code>jdbc</code>配置和测试</p>
</li>
</ul>
</blockquote>
<h2 id="安装成功"><a href="#安装成功" class="headerlink" title="安装成功"></a>安装成功</h2><p><img src="https://i.loli.net/2020/07/29/uoRQ4zkxIwT7XOS.jpg" srcset="/img/loading.gif" lazyload alt="ambari_bushu.jpg"></p>
<h1 id="重新安装Ambari"><a href="#重新安装Ambari" class="headerlink" title="重新安装Ambari"></a>重新安装Ambari</h1><h2 id="1、关闭所有组件"><a href="#1、关闭所有组件" class="headerlink" title="1、关闭所有组件"></a>1、关闭所有组件</h2><h4 id="1-1-1-关闭所有组件"><a href="#1-1-1-关闭所有组件" class="headerlink" title="1.1.1.关闭所有组件"></a>1.1.1.关闭所有组件</h4><p>通过ambari将集群中的所用组件都关闭，如果关闭不了，直接<code>kill-9 XXX</code></p>
<h4 id="1-1-2-关闭ambari-server，ambari-agent"><a href="#1-1-2-关闭ambari-server，ambari-agent" class="headerlink" title="1.1.2.关闭ambari-server，ambari-agent"></a>1.1.2.关闭ambari-server，ambari-agent</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">ambari-server stop<br>ambari-agent stop<br></code></pre></div></td></tr></table></figure>

<h4 id="1-1-3-yum删除所有Ambari组件"><a href="#1-1-3-yum删除所有Ambari组件" class="headerlink" title="1.1.3.yum删除所有Ambari组件"></a>1.1.3.yum删除所有Ambari组件</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo yum remove -y hadoop_3* ranger* zookeeper* atlas-metadata* ambari* spark* slide* hive* oozie* pig* tez* hbase* knox* storm* accumulo* falcon* ambari* smartsense*<br></code></pre></div></td></tr></table></figure>

<h4 id="1-1-4-删除各种文件"><a href="#1-1-4-删除各种文件" class="headerlink" title="1.1.4.删除各种文件"></a>1.1.4.删除各种文件</h4><p>特别注意：这里删除的时候，一定要慎重检查</p>
<p>ambari安装hadoop集群会创建一些用户，清除集群时有必要清除这些用户，并删除对应的文件夹。这样做可以避免集群运行时出现的文件访问权限错误的问题。总之，Ambari自己创建的东西全部删完，不然的话重新安装的时候会报各种“找不到文件”的错误。</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo userdel oozie<br>sudo userdel hive<br>sudo userdel ambari-qa<br>sudo userdel flume <br>sudo userdel hdfs <br>sudo userdel knox <br>sudo userdel storm <br>sudo userdel mapred<br>sudo userdel hbase <br>sudo userdel tez <br>sudo userdel zookeeper<br>sudo userdel kafka <br>sudo userdel falcon<br>sudo userdel sqoop <br>sudo userdel yarn <br>sudo userdel hcat<br>sudo userdel atlas<br>sudo userdel spark<br>sudo userdel ams<br>sudo userdel zeppelin<br> <br>sudo rm -rf /home/atlas<br>sudo rm -rf /home/accumulo<br>sudo rm -rf /home/hbase<br>sudo rm -rf /home/hive<br>sudo rm -rf /home/oozie<br>sudo rm -rf /home/storm<br>sudo rm -rf /home/yarn<br>sudo rm -rf /home/ambari-qa<br>sudo rm -rf /home/falcon<br>sudo rm -rf /home/hcat<br>sudo rm -rf /home/kafka<br>sudo rm -rf /home/mahout<br>sudo rm -rf /home/spark<br>sudo rm -rf /home/tez<br>sudo rm -rf /home/zookeeper<br>sudo rm -rf /home/flume<br>sudo rm -rf /home/hdfs<br>sudo rm -rf /home/knox<br>sudo rm -rf /home/mapred<br>sudo rm -rf /home/sqoop<br><br>下面三个慎重<br>sudo rm -rf /var/lib/ambari*<br>sudo rm -rf /usr/lib/ambari-*<br>sudo rm -rf /usr/lib/ams-hbase*<br><br> <br>sudo rm -rf /etc/ambari-*<br>sudo rm -rf /etc/hadoop<br>sudo rm -rf /etc/hbase<br>sudo rm -rf /etc/hive*<br>sudo rm -rf /etc/sqoop <br>sudo rm -rf /etc/zookeeper  <br>sudo rm -rf /etc/tez* <br>sudo rm -rf /etc/spark2 <br>sudo rm -rf /etc/phoenix    <br>sudo rm -rf /etc/kafka  <br> <br>sudo rm -rf /var/run/spark*<br>sudo rm -rf /var/run/hadoop*<br>sudo rm -rf /var/run/hbase<br>sudo rm -rf /var/run/zookeeper<br>sudo rm -rf /var/run/hive*<br>sudo rm -rf /var/run/sqoop<br>sudo rm -rf /var/run/ambari-*<br>sudo rm -rf /var/<span class="hljs-built_in">log</span>/hadoop*<br>sudo rm -rf /var/<span class="hljs-built_in">log</span>/hive*<br>sudo rm -rf /var/<span class="hljs-built_in">log</span>/ambari-*<br>sudo rm -rf /var/<span class="hljs-built_in">log</span>/hbase<br>sudo rm -rf /var/<span class="hljs-built_in">log</span>/sqoop<br> <br>sudo rm -rf /usr/lib/ambari-*<br> <br>sudo rm -rf /usr/hdp<br><br>sudo rm -rf /usr/bin/zookeeper-*<br>sudo rm -rf /usr/bin/yarn  <br>sudo rm -rf /usr/bin/sqoop*  <br>sudo rm -rf /usr/bin/ranger-admin-start <br>sudo rm -rf /usr/bin/ranger-admin-stop <br>sudo rm -rf /usr/bin/ranger-kms <br>sudo rm -rf /usr/bin/phoenix-psql <br>sudo rm -rf /usr/bin/phoenix-*  <br>sudo rm -rf /usr/bin/mapred   <br>sudo rm -rf /usr/bin/hive <br>sudo rm -rf /usr/bin/hiveserver2 <br>sudo rm -rf /usr/bin/hbase<br>sudo rm -rf /usr/bin/hcat <br>sudo rm -rf /usr/bin/hdfs <br>sudo rm -rf /usr/bin/hadoop  <br>sudo rm -rf /usr/bin/beeline <br><br>sudo rpm -qa | grep ambari   获取到要删除的列表<br>sudo rpm -e --nodeps 列表中条项<br><br>sudo rpm -qa | grep zookeeper<br>sudo rpm -e --nodeps 列表中的条项<br></code></pre></div></td></tr></table></figure>

<h4 id="1-1-5-清理数据库"><a href="#1-1-5-清理数据库" class="headerlink" title="1.1.5.清理数据库"></a>1.1.5.清理数据库</h4><p>删除mysql中的ambari库</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">drop database ambari;<br></code></pre></div></td></tr></table></figure>

<h4 id="1-1-6-重装ambari"><a href="#1-1-6-重装ambari" class="headerlink" title="1.1.6.重装ambari"></a>1.1.6.重装ambari</h4><p>通过以上清理后，重新安装ambari和hadoop集群（包括HDFS，YARN+MapReduce2，Zookeeper，AmbariMetrics，Spark）成功。</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><h3 id="1、重装时-hostname没有配置"><a href="#1、重装时-hostname没有配置" class="headerlink" title="1、重装时 hostname没有配置"></a>1、重装时 hostname没有配置</h3><figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk">vi<span class="hljs-regexp">/etc/</span>ambari-agent<span class="hljs-regexp">/conf/</span>ambari-agent.ini<br></code></pre></div></td></tr></table></figure>

<h3 id="2、yum的cache缓存没有清除"><a href="#2、yum的cache缓存没有清除" class="headerlink" title="2、yum的cache缓存没有清除"></a>2、<code>yum</code>的<code>cache</code>缓存没有清除</h3><h3 id="3、文件没删除干净"><a href="#3、文件没删除干净" class="headerlink" title="3、文件没删除干净"></a>3、文件没删除干净</h3>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Ambari/">Ambari</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Ambari/">Ambari</a>
                    
                      <a class="hover-with-bg" href="/tags/HDP/">HDP</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/08/06/superset%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Superset问题汇总</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/07/10/Hive2-2/">
                        <span class="hidden-mobile">Hive源码阅读(二)：基本架构与程序执行入口</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
